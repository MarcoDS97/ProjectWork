<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Home</title>
    <meta content="" name="keywords">
    <meta content="" name="description">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&family=Raleway:wght@600;800&display=swap"
          rel="stylesheet">

    <!-- Icon Font Stylesheet -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <link href="static/lib/lightbox/css/lightbox.min.css" rel="stylesheet">
    <link href="static/lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">


    <!-- Customized Bootstrap Stylesheet -->
    <link href="static/css/bootstrap.min.css" rel="stylesheet">

    <!-- Template Stylesheet -->
    <link href="static/css/style.css" rel="stylesheet">

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/js-cookie@3.0.0/dist/js.cookie.min.js"></script>

    <!--    <script>-->
    <!--        $(document).ready(function() {-->
    <!--            $('#ia_form').on('submit', function(event) {-->
    <!--                event.preventDefault();-->
    <!--            // get the CSRF token from the cookie-->
    <!--            var csrftoken = Cookies.get('csrftoken');-->

    <!--            // set the CSRF token in the AJAX headers-->
    <!--            $.ajaxSetup({-->
    <!--                headers: { 'X-CSRFToken': csrftoken }-->
    <!--            });-->
    <!--                // Get the prompt-->
    <!--                var prompt = $('#prompt').val();-->
    <!--                var dateTime = new Date();-->
    <!--                var time = dateTime.toLocaleTimeString();-->
    <!--                $.ajax({-->
    <!--                    url: '/',-->
    <!--                    type: 'POST',-->
    <!--                    data: {prompt: prompt},-->
    <!--                    dataType: 'json',-->
    <!--                    success: function(data) {-->
    <!--                        $('#response').append('<p id="GFG2">Spesana.IA<i class="bi bi-stars"></i>: ' + data.response + '</p>');-->
    <!--                        $('#response #GFG2').css({"color": "green"});-->
    <!--                    }-->
    <!--                });-->
    <!--            });-->
    <!--        });-->
    <!--    </script>-->

    <script>
        $(document).ready(function() {
            $('.ia-btn').on('click', function(event) {
                event.preventDefault();
                var buttonVal = $(this).val();

            var csrftoken = Cookies.get('csrftoken');

            $.ajaxSetup({
                headers: { 'X-CSRFToken': csrftoken }
            });


            var prompt = buttonVal;
            var dateTime = new Date();
            var time = dateTime.toLocaleTimeString();
            $.ajax({
                url: '/',
                type: 'POST',
                data: {prompt: prompt},
                dataType: 'json',
                success: function(data) {
                    $('#response').append('<p id="GFG2">Spesana.IA<i class="bi bi-stars"></i>: ' + data.response + '</p>');
                    $('#response #GFG2').css({"color": "green"});
                    }
                });
            });
        });
        $(document).ready(function() {
            $('.fav-btn').on('click', function(event) {
                event.preventDefault();
                var buttonFav = $(this)
                var buttonVal = $(this).val();

            var csrftoken = Cookies.get('csrftoken');

            $.ajaxSetup({
                headers: { 'X-CSRFToken': csrftoken }
            });


            var favProd = buttonVal;
            $.ajax({
                url: '/',
                type: 'POST',
                data: {fav: favProd},
                dataType: 'json',
                success: function(data) {
                buttonFav.addClass('btn-secondary');
                    }
                });
            });
        });
    </script>
    <style>
        .ia_form{}
        .code-btn{
        font-size: 1.5em
        }
        .px-search{
            padding-right: 1.5rem !important;
            padding-left: 4rem !important;
            }
        .img-best {
        max-width: 100%;
        height: 200px
        }

        .maxText {
        height: 40px;
        }
        .bg-verde-scuro {
        background: #014017
        }
        .verde-scuro {
        color: #014017
        }
         .bg-verde-medio {
        background: #33A614
        }
        .verde-medio {
        color: #33A614
        }
        .bg-verde-chiaro {
        background: #68D11F
        }
        .verde-chiaro {
        color: #68D11F
        }
        .bg-verde-blu {
        background: #013832
        }
        .verde-blu {
        color: #013832
        }
        .bg-bianco {
        background: #F2F2F2
        }
        .bianco {
        color: #F2F2F2
        }
        .arancione{
        color: #DC4001
        }

        .modal-backdrop { background-color: transparent; }

    </style>
</head>
<body>

<!-- Spinner Start -->
<div id="spinner"
     class="show w-100 vh-100 bg-white position-fixed translate-middle top-50 start-50  d-flex align-items-center justify-content-center">
    <div class="spinner-grow text-primary" role="status"></div>
</div>
<!-- Spinner End -->

{% if flagLog == False %}
<!-- Navbar start senza essere loggati -->
<div class="container-fluid fixed-top bg-bs-dark bg-verde-scuro">
    <div class="container topbar bg-verde-medio d-none d-lg-block">
        <div class="d-flex justify-content-center">
            <h5 class="text-light">Siamo un marchio che ispira e guida le persone verso scelte alimentari migliori!
                üå±üçéü•¶</h5>
        </div>
    </div>

    <div class="container px-0">
        <nav class="navbar navbar-light bg-verde-scuro navbar-expand-xl">
            <a href="/" class="navbar-brand"><h1 class="bianco display-6">SpeSana</h1></a>
            <button class="navbar-toggler py-2 px-3" type="button" data-bs-toggle="collapse"
                    data-bs-target="#navbarCollapse">
                <span class="fa fa-bars text-primary"></span>
            </button>
            <div class="collapse navbar-collapse bg-verde-scuro" id="navbarCollapse">
                <div class="navbar-nav mx-auto">
                    <a href="/" class="nav-item nav-link active">Home</a>
                    <a href="/product" class="nav-item nav-link">Prodotti</a>
                    <a href="/nutriscore" class="nav-item nav-link">Nutriscore</a>
                </div>
                <div class="d-flex m-3 me-0">
                    <button class="btn-search btn border border-secondary btn-md-square rounded-circle bg-white me-4"
                            data-bs-toggle="modal" data-bs-target="#searchModal"><i
                            class="fas fa-search verde-scuro"></i></button>
                    <div class="nav-item dropdown">
                        <a type="button" class="btn bg-verde-chiaro bianco dropdown-toggle" data-bs-toggle="dropdown"
                           data-bs-display="static" aria-expanded="false">
                            <i class="fas fa-user bianco fa-2x"></i>
                        </a>
                        <div class="dropdown-menu m-0 bg-secondary bianco rounded-0">
                            <a href="/login" class="dropdown-item">Login</a>
                            <a href="/signup" class="dropdown-item">Registrati</a>
                        </div>
                    </div>
                </div>
            </div>
        </nav>
    </div>
</div>
<!-- Navbar End -->
{% else %}

<!-- Navbar start login -->
<div class="container-fluid fixed-top bg-bs-dark bg-verde-scuro">
    <div class="container topbar bg-verde-medio d-none d-lg-block">
        <div class="d-flex justify-content-center">
            <h5 class="text-light">Siamo un marchio che ispira e guida le persone verso scelte alimentari migliori!
                üå±üçéü•¶</h5>
        </div>
    </div>

    <div class="container px-0">
        <nav class="navbar navbar-light bg-verde-scuro navbar-expand-xl">
            <a href="/" class="navbar-brand"><h1 class="bianco display-6">SpeSana</h1></a>
            <button class="navbar-toggler py-2 px-3" type="button" data-bs-toggle="collapse"
                    data-bs-target="#navbarCollapse">
                <span class="fa fa-bars text-primary"></span>
            </button>
            <div class="collapse navbar-collapse bg-verde-scuro" id="navbarCollapse">
                <div class="navbar-nav mx-auto">
                    <a href="/" class="nav-item nav-link active">Home</a>
                    <a href="/product" class="nav-item nav-link">Prodotti</a>
                    <a href="/nutriscore" class="nav-item nav-link">Nutriscore</a>
                </div>
                <div class="bianco">Ciao {{ utente.Name }} {{ utente.Surname }}</div>
                <div class="d-flex m-3 me-0">
                    <button class="btn-search btn border border-secondary btn-md-square rounded-circle bg-white me-4"
                            data-bs-toggle="modal" data-bs-target="#searchModal"><i
                            class="fas fa-search verde-scuro"></i></button>
                    <div class="nav-item dropdown">
                        <a type="button" class="btn bg-verde-chiaro bianco dropdown-toggle" data-bs-toggle="dropdown"
                           data-bs-display="static" aria-expanded="false">
                            <i class="fas fa-user bianco fa-2x"></i>
                        </a>
                        <div class="dropdown-menu m-0 bg-secondary bianco rounded-0">
                            <a href="/profilo" class="dropdown-item">Il mio profilo</a>
                            <a href="/logout" class="dropdown-item">Logout</a>
                        </div>
                    </div>
                </div>
            </div>
        </nav>
    </div>
</div>
<!-- Navbar End -->
{% endif %}

<!-- Modal Search Start -->
<div class="modal fade" id="searchModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-fullscreen">
        <div class="modal-content rounded-0">
            <div class="modal-header">
                <h5 class="modal-title bianco" id="exampleModalLabel">Search by keyword</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body d-flex align-items-center">
                <form class="w-75 mx-auto d-flex" method="POST" enctype="multipart/form-data">
                    <div class="relative">
                        <label title="Carica codice" for="code_modal" class="cursor-pointer flex items-center">
                            <div class="w-max relative btn btn-primary border-2 border-secondary px-3 rounded-pill text-white"
                                 style="padding-top: 0.6rem !important; padding-bottom: 0.6rem !important;">
                                <i class="bi bi-upc-scan code-btn"></i>
                            </div>
                        </label>
                        <input hidden="" type="file" name="code_modal" id="code_modal">
                    </div>
                    <input type="text" class="form-control p-3" placeholder="keywords"
                           aria-describedby="search-icon-1" id="search_modal" name="search_modal">
                    <button type="submit" id="search-icon-1" class="input-group-text p-3"><i
                            class="fa fa-search"></i></button>
                </form>
            </div>
        </div>
    </div>
</div>
<!-- Modal Search End -->

<!-- Hero Start -->
<div class="container-fluid hero-header">
    <div class="container py-5">
        <div class="row g-5 align-items-center">
            <div class="col-md-12 col-lg-7">
                <h4 class="mb-1 ms-2 arancione">Informazioni nutrizionali a portata di clic</h4>
                <h1 class="mb-5 display-3" style="color: #014017">Scopri il potere degli alimenti</h1>
                <form class="position-relative mx-auto" method="POST" enctype="multipart/form-data">
                    <div class="relative">
                        <label title="Carica codice" for="code_hero" class="cursor-pointer flex items-center">
                            <div class="w-max relative btn btn-primary border-2 border-secondary px-3 position-absolute rounded-pill text-white"
                                 style="top: 29.5%; left:0%; padding-top: 0.6rem !important; padding-bottom: 0.6rem !important;">
                                <i class="bi bi-upc-scan code-btn"></i>
                            </div>
                        </label>
                        <input hidden="" type="file" name="code_hero" id="code_hero">
                    </div>
                    <input class="form-control border-2 border-secondary w-75 py-3 px-search rounded-pill" type="text"
                           name="search_hero" placeholder="Inserisci prodotto">
                    <button type="submit"
                            class="btn btn-primary border-2 border-secondary py-3 px-4 position-absolute rounded-pill text-white"
                            style="top: 29%; right: 25%;">Cerca
                    </button>
                </form>
            </div>
            <div class="col-md-12 col-lg-5">
                <div id="carouselId" class="carousel slide position-relative" data-bs-ride="carousel">
                    <div class="carousel-inner" role="listbox">
                        <div class="carousel-item active rounded">
                            <img src="static/imgTest/home_start_info.jpeg"
                                 class="img-fluid w-100 h-100 bg-secondary rounded"
                                 alt="First slide">
                            <a href="#" class="btn px-4 py-2 text-white rounded">Informazione</a>
                        </div>
                        <div class="carousel-item rounded">
                            <img src="static/imgTest/home_start_ricette.jpg" class="img-fluid w-100 h-100 rounded"
                                 alt="Second slide">
                            <a href="#" class="btn px-4 py-2 text-white rounded">Ricette</a>
                        </div>
                        <div class="carousel-item rounded">
                            <img src="static/imgTest/home_start_consigli.jpeg" class="img-fluid w-100 h-100 rounded"
                                 alt="Second slide">
                            <a href="#" class="btn px-4 py-2 text-white rounded">Consigli</a>
                        </div>
                        <div class="carousel-item rounded">
                            <img src="static/imgTest/home_start_rapport.jpeg" class="img-fluid w-100 h-100 rounded"
                                 alt="Second slide">
                            <a href="#" class="btn px-4 py-2 text-white rounded">Rapporti</a>
                        </div>
                    </div>
                    <button class="carousel-control-prev" type="button" data-bs-target="#carouselId"
                            data-bs-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Previous</span>
                    </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#carouselId"
                            data-bs-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Next</span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Hero End -->

<!-- Fruits Shop Start-->
<div class="container-fluid fruite mb-5">
    <div class="container py-5">
        <div class="tab-class text-center">
            <div class="row g-4">
                <div class="col-lg-4 text-start">
                    <!--      LINK NUTRISCORE              -->
                    <h2><span class="text-secondary">Nutri il tuo benessere,</span> scopri Nutriscore</h2>
                </div>
                <div class="col-lg-8 text-end">
                    <ul class="nav nav-pills d-inline-flex text-center mb-5">
                        <li class="nav-item">
                            <a class="d-flex m-2 py-2 bg-light rounded-pill active" data-bs-toggle="pill" href="#tab-1">
                                <span class="text-dark" style="width: 130px;">Nutriscore A</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="d-flex py-2 m-2 bg-light rounded-pill" data-bs-toggle="pill" href="#tab-2">
                                <span class="text-dark" style="width: 130px;">Nutriscore B</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="d-flex m-2 py-2 bg-light rounded-pill" data-bs-toggle="pill" href="#tab-3">
                                <span class="text-dark" style="width: 130px;">Nutriscore C</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="d-flex m-2 py-2 bg-light rounded-pill" data-bs-toggle="pill" href="#tab-4">
                                <span class="text-dark" style="width: 130px;">Nutriscore D</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="d-flex m-2 py-2 bg-light rounded-pill" data-bs-toggle="pill" href="#tab-5">
                                <span class="text-dark" style="width: 130px;">Nutriscore E</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>

            <div class="tab-content">
                {% for score in lista_nutriscore %}
                <div id="tab-{{loop.index}}" class="tab-pane fade show p-0 {% if loop.index == 1 %} active {% endif %}">
                    <div class="row g-4 mx-auto">
                        {% for elem in score[:4] %}
                        <div class="col-md-6 col-lg-4 col-xl-3">
                            <div class="rounded position-relative fruite-item d-flex flex-column">
                                <a href="/product/{{elem.code}}">
                                    <div class="fruite-img border border-secondary">
                                        <img src="{{elem.image_url}}"
                                             class="img-fluid rounded-top" alt="">
                                    </div>
                                </a>
                                <div class="text-white bg-secondary px-3 py-1 rounded position-absolute"
                                     style="top: 10px; left: 10px;">{{elem.nutriscore_grade.upper()}}
                                </div>
                                <div class="p-2 border border-secondary border-top-0 rounded-bottom d-flex flex-column align-items-center h-300">
                                    <a class="h6 maxText" href="/product/{{elem.code}}">{{elem.product_name}}</a>
                                    <div class="d-flex justify-content-between flex-lg-wrap">
                                        <form method="post">
                                        <button class="fav-btn btn border border-secondary rounded-pill px-3 text-primary mx-1 my-2" name="fav"
                                        {% if flagLog %} value="{{ utente.Email }}, {{elem.code}}" {% else %} onclick="Gologin()" {% endif %}>
                                            <i class="fa fa-heart me-2 text-secondary"></i>
                                        </button>
                                            </form>
                                        <form method="post" class="ia_form">
                                            <button class="ia-btn btn btn-secondary border-secondary rounded-pill px-3 text-light mx-1 my-2"
                                                    type="submit" data-bs-toggle="modal" name="prompt"
                                                    data-bs-target="#chatModal"
                                                    {% if flagLog %} value="{{ utente.Email }}, {{elem.code}}, ricetta"
                                                    {% else %} onclick="Gologin()" {% endif %}><i
                                                    class="fas fa-drumstick-bite"></i><i
                                                    class="bi bi-stars me-2"></i></button>
                                        </form>
                                        <form method="post" class="ia_form">
                                            <button class="ia-btn btn btn-secondary border-secondary rounded-pill px-3 text-light mx-1 my-2"
                                                    type="submit" data-bs-toggle="modal" name="prompt"
                                                    data-bs-target="#chatModal"
                                                    {% if flagLog %} value="{{ utente.Email }}, {{elem.code}}, info" {%
                                                    else %} onclick="Gologin()" {% endif %}><i
                                                    class="bi bi-info-circle"></i><i
                                                    class="bi bi-stars me-2"></i></button>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>
<!-- Fruits Shop End-->

<!-- Features Section Start -->
<div class="container-fluid featurs mb-3">
    <div class="container text-center"><h1 class="display-4">Perch√© scegliere <span class="display-3 verde-scuro">SpeSana?</span>
    </h1></div>
    <div class="container py-5">
        <div class="row g-4">
            <div class="col-md-6 col-lg-3">
                <div class="featurs-item text-center rounded bg-light p-4">
                    <div class="featurs-icon btn-square rounded-circle bg-secondary mb-5 mx-auto">
                        <i class="bi bi-emoji-sunglasses fa-3x text-white"></i>
                    </div>
                    <div class="featurs-content text-center">
                        <h5 class="text-secondary">Personalizzazione</h5>
                        <p class="mb-0">Informazioni nutrizionali basate su di te.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-6 col-lg-3">
                <div class="featurs-item text-center rounded bg-light p-4">
                    <div class="featurs-icon btn-square rounded-circle bg-secondary mb-5 mx-auto">
                        <i class="bi bi-search-heart fa-3x text-white"></i>
                    </div>
                    <div class="featurs-content text-center">
                        <h5 class="text-secondary">Scelte consapevoli</h5>
                        <p class="mb-0">Scelte alimentari pi√π informate e bilanciate.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-6 col-lg-3">
                <div class="featurs-item text-center rounded bg-light p-4">
                    <div class="featurs-icon btn-square rounded-circle bg-secondary mb-5 mx-auto">
                        <i class="bi bi-person-arms-up fa-3x text-white"></i>
                    </div>
                    <div class="featurs-content text-center">
                        <h5 class="text-secondary">Migliora la tua salute</h5>
                        <p class="mb-0">Possiamo contribuire a una vita pi√π sana</p>
                    </div>
                </div>
            </div>
            <div class="col-md-6 col-lg-3">
                <div class="featurs-item text-center rounded bg-light p-4">
                    <div class="featurs-icon btn-square rounded-circle bg-secondary mb-5 mx-auto">
                        <i class="bi bi-clock-history fa-3x text-white"></i>
                    </div>
                    <div class="featurs-content text-center">
                        <h5 class="text-secondary">Tempo risparmiato</h5>
                        <p class="mb-0">Riduci il tempo speso alla ricerca di informazioni.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Featurs Section End -->

<!-- Bestseller Product Start -->
<div class="container-fluid">
    <div class="container py-5">
        <div class="text-center mx-auto mb-5" style="max-width: 700px;">
            <h1 class="display-4">Prodotti pi√π scansionati</h1>
        </div>
        <div class="row g-4">
            {% for elem in best %}
            <div class="col-lg-6 col-xl-4">
                <div class="rounded bg-light" style="margin-bottom: 20px">
                    <div class="row align-items-center p-3">
                        <div class="col-6">
                            <a href="product/{{elem.code}}">
                                <img src="{{elem.image_url}}" class="img-best rounded-top"
                                     alt="">
                            </a>
                        </div>
                        <div class="col-6">
                            <a href="product/{{elem.code}}" class="h5">{{elem.product_name}}</a>
                            <h6 class="mb-3">{{elem.brands}}</h6>

                            <div class="d-flex  flex-lg-wrap">
                                 <form method="post">
                                        <button class="fav-btn btn border border-secondary rounded-pill px-3 text-primary mx-1 my-2" name="fav"
                                        {% if flagLog %} value="{{ utente.Email }}, {{elem.code}}" {% else %} onclick="Gologin()" {% endif %}>
                                            <i class="fa fa-heart me-2 text-secondary"></i>
                                        </button>
                                            </form>
                                <form method="post" class="ia_form">
                                    <button class="ia-btn btn btn-secondary border-secondary rounded-pill px-3 text-light mx-0 my-2"
                                            type="submit" data-bs-toggle="modal" name="prompt"
                                            data-bs-target="#chatModal"
                                            {% if flagLog %} value="{{ utente.Email }}, {{elem.code}}, ricetta"
                                            {% else %} onclick="Gologin()" {% endif %}><i
                                            class="fas fa-drumstick-bite"></i><i
                                            class="bi bi-stars me-2"></i></button>
                                </form>
                                <form method="post" class="ia_form">
                                    <button class="ia-btn btn btn-secondary border-secondary rounded-pill px-3 text-light mx-1 my-2"
                                            type="submit" data-bs-toggle="modal" name="prompt"
                                            data-bs-target="#chatModal"
                                            {% if flagLog %} value="{{ utente.Email }}, {{elem.code}}, info" {%
                                            else %} onclick="Gologin()" {% endif %}><i
                                            class="bi bi-info-circle"></i><i
                                            class="bi bi-stars me-2"></i></button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>
<!-- Bestseller Product End -->

<!-- Banner Section Start-->
<div class="container-fluid banner bg-verde-medio">
    <div class="container py-5">
        <div class="row g-4 align-items-center">
            <div class="col-lg-6">
                <div class="py-4">
                    {% if flagLog %}
                    <h1 class="display-3 arancione mb-0">SpeSana.IA</h1>
                    <span class="h2 text-white">Ricette su misura</span>
                    <p class="mb-4 mt-2 verde-scuro">il tuo compagno di viaggio per una cucina pi√π intelligente!</p>
                    <a href="/profilo/ricette"
                       class="banner-btn btn border-2 rounded-pill bg-verde-scuro text-white py-3 px-5">LE MIE RICETTE<i
                            class="bi bi-stars me-2"></i></a>
                    {% else %}
                    <h1 class="display-3 arancione mb-0">Crea una ricetta,</h1>
                    <span class="h2 text-white">scopri i segreti degli alimenti.</span>
                    <p class="mb-4 mt-2 verde-scuro">Alimenti analizzati, ricette personalizzate: benvenuti in
                        SpeSana.IA!</p>
                    <a href="/login" class="banner-btn btn border-2 rounded-pill bg-verde-scuro text-white py-3 px-5">PROVALA
                        ORA<i class="bi bi-stars me-2"></i></a>
                    {% endif %}
                </div>
            </div>
            <div class="col-lg-6">
                <div class="position-relative">
                    <img src="static/imgTest/home_banner_ia.png" class="img-fluid w-100 rounded" alt="">
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Banner Section End -->

<!-- Fruits Shop Start-->
<div class="container-fluid fruite">
    <div class="container py-5">
        <div class="tab-class text-center">
            <div class="row g-4">
                <div class="col-lg-4 text-start">
                    <h2><span class="text-secondary">Oltre 40.000 prodotti,</span> un solo sito</h2>
                </div>
                <div class="col-lg-8 text-end">
                    <ul class="nav nav-pills d-inline-flex text-center mb-5">
                        <li class="nav-item">
                            <a class="d-flex m-2 py-2 bg-light rounded-pill active" data-bs-toggle="pill" href="#tab2-1">
                                <span class="text-dark" style="width: 130px;">Carne</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="d-flex py-2 m-2 bg-light rounded-pill" data-bs-toggle="pill" href="#tab2-2">
                                <span class="text-dark" style="width: 130px;">Bevande</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="d-flex m-2 py-2 bg-light rounded-pill" data-bs-toggle="pill" href="#tab2-3">
                                <span class="text-dark" style="width: 130px;">Latticini</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="d-flex m-2 py-2 bg-light rounded-pill" data-bs-toggle="pill" href="#tab2-4">
                                <span class="text-dark" style="width: 130px;">Snack Dolci</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <!--     LINK CATEGORIES       -->
                            <a class="d-flex m-2 py-2 bg-verde-scuro rounded-pill" href="/product">
                                <span class="text-light" style="width: 130px;">Prodotti</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="tab-content">
                {% for score in categorie %}
                <div id="tab2-{{loop.index}}" class="tab-pane fade show p-0 {% if loop.index == 1 %} active {% endif %}">
                    <div class="row g-4 mx-auto">
                        {% for elem in score[:4] %}
                        <div class="col-md-6 col-lg-4 col-xl-3">
                            <div class="rounded position-relative fruite-item d-flex flex-column">
                                <a href="/product/{{elem.code}}">
                                    <div class="fruite-img border border-secondary">
                                        <img src="{{elem.image_url}}"
                                             class="img-fluid rounded-top" alt="">
                                    </div>
                                </a>
                                <div class="text-white bg-secondary px-3 py-1 rounded position-absolute"
                                     style="top: 10px; left: 10px;">{{elem.nutriscore_grade.upper()}}
                                </div>
                                <div class="p-2 border border-secondary border-top-0 rounded-bottom d-flex flex-column align-items-center h-300">
                                    <a class="h6 maxText" href="/product/{{elem.code}}">{{elem.product_name}}</a>
                                    <div class="d-flex justify-content-between flex-lg-wrap">
                                         <form method="post">
                                        <button class="fav-btn btn border border-secondary rounded-pill px-3 text-primary mx-1 my-2" name="fav"
                                        {% if flagLog %} value="{{ utente.Email }}, {{elem.code}}" {% else %} onclick="Gologin()" {% endif %}>
                                            <i class="fa fa-heart me-2 text-secondary"></i>
                                        </button>
                                            </form>
                                        <form method="post" class="ia_form">
                                            <button class="ia-btn btn btn-secondary border-secondary rounded-pill px-3 text-light mx-1 my-2"
                                                    type="submit" data-bs-toggle="modal" name="prompt"
                                                    data-bs-target="#chatModal"
                                                    {% if flagLog %} value="{{ utente.Email }}, {{elem.code}}, ricetta"
                                                    {% else %} onclick="Gologin()" {% endif %}><i
                                                    class="fas fa-drumstick-bite"></i><i
                                                    class="bi bi-stars me-2"></i></button>
                                        </form>
                                        <form method="post" class="ia_form">
                                            <button class="ia-btn btn btn-secondary border-secondary rounded-pill px-3 text-light mx-1 my-2"
                                                    type="submit" data-bs-toggle="modal" name="prompt"
                                                    data-bs-target="#chatModal"
                                                    {% if flagLog %} value="{{ utente.Email }}, {{elem.code}}, info" {%
                                                    else %} onclick="Gologin()" {% endif %}><i
                                                    class="bi bi-info-circle"></i><i
                                                    class="bi bi-stars me-2"></i></button>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>
<!-- Fruits Shop End-->


<!-- Footer Start -->

<div class="container-fluid bg-verde-scuro text-white-50 footer pt-3 mt-5">
    <div class="container">
        <div class="pb-4" style="border-bottom: 1px solid rgba(226, 175, 24, 0.5) ;">
            <div class="row g-4">
                <div class="col-lg-3">
                    <a href="#">
                        <h1 class="text-light mb-0">SpeSana</h1>
                        <p class="text-secondary mb-0">Nutri la tua mente e il tuo corpo</p>
                    </a>
                </div>
                <div class="col-lg-6">
                    <div class="position-relative text-center mx-auto">
                        <h5 class="text-light mt-2 mb2">Progetto Finale del corso</h5>
                        <h5 class="text-light">Jr. Data Engineer - DAITA 12.</h5>
                    </div>
                </div>
                <div class="col-sm-3">
                    <div class="d-flex justify-content-end pt-3">
                        <img src="static/imgTest/logo-generation.svg">
                    </div>
                </div>
            </div>
            <h5 class="text-light mt-4 mb-3 text-center">Sviluppato da:</h5>
            <p class="mb-2 text-center"><a class="text-light text-decoration-underline"
                                           href="//www.linkedin.com/in/armando-izaguirre-la-rocca/"> Armando
                Izaguirre </a>-
                <a class="text-light text-decoration-underline" href="//www.linkedin.com/in/benedetta-aversano/">
                    Benedetta Aversano </a>-
                <a class="text-light text-decoration-underline" href="//www.linkedin.com/in/marco-de-sio-5b87b7196/">
                    Marco de Sio </a>-
                <a class="text-light text-decoration-underline" href="//www.linkedin.com/in/stefano-crivella/"> Stefano
                    Crivella </a>-
                <a class="text-light text-decoration-underline"
                   href="//www.linkedin.com/in/riccardo-benedetti-44aa70299/"> Riccardo Benedetti </a>


        </div>
    </div>
</div>
<!-- Footer End -->

<!-- Back to Top -->
<div class="row">
    <div class="col">
        <button type="button" class="btn btn-secondary border-3 border-secondary ia-button" data-bs-toggle="modal"
                data-bs-target="#chatModal">
            SpeSana.IA<i class="bi bi-stars"></i>
        </button>
    </div>
    <div class="col">
        <a href="#" class="btn btn-primary border-3 border-primary rounded-circle back-to-top"><i
                class="fa fa-arrow-up"></i></a>
    </div>
</div>


<!--SpeSana.IA CHAT-->
<div class="modal fade modal-bottom-right" id="chatModal" tabindex="-1" aria-labelledby="chatModalLabel"
     aria-hidden="true">
    <div class="modal-dialog position-fixed bottom-0 end-0 mb-5 me-3 modal-dialog-scrollable">
        <div class="modal-content" style="width: 375px;">
            <div class="modal-header">
                <h5 class="modal-title" id="chatModalLabel">SpeSana.IA</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="mb-3">
                    <h6>Response:</h6>
                    <div class="container border overflow-auto h-50" id="response"></div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Chiudere</button>
            </div>
        </div>
    </div>
</div>

<!-- JavaScript Libraries -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="static/lib/easing/easing.min.js"></script>
<script src="static/lib/waypoints/waypoints.min.js"></script>
<script src="static/lib/lightbox/js/lightbox.min.js"></script>
<script src="static/lib/owlcarousel/owl.carousel.min.js"></script>

<!-- Template Javascript -->
<script src="static/js/main.js"></script>

<script>
    function Gologin() {
      window.location.href="/login";
    }
</script>
</body>
</html>